---
layout: post
title: "Probabilidades no Jogo da Velha: Uma An√°lise Matem√°tica"
date:   2025-05-11 13:12:00 +0000
category: "PROBABILIDADE"
author: "Morrison K√ºlsenn"
author_bio: "Especialista em Teoria dos Jogos e Probabilidade Aplicada"
image: "/assets/images/img/tictactoes.png"
read_time: "7 minutos"
tags: [probabilidade, teoria-dos-jogos, combinatoria, matematica-recreativa]
---

O jogo da velha, conhecido em ingl√™s como "Tic-tac-toe" ou "Noughts and Crosses", √© um dos jogos mais simples e populares do mundo. Apesar de sua aparente simplicidade, este jogo oferece um fascinante campo de estudo para a teoria da probabilidade e a matem√°tica combinat√≥ria.

## Introdu√ß√£o ao Jogo da Velha

O jogo da velha √© disputado em um tabuleiro 3√ó3, onde dois jogadores alternam marcando espa√ßos vazios com seus s√≠mbolos (geralmente X e O). O objetivo √© formar uma linha de tr√™s s√≠mbolos iguais na horizontal, vertical ou diagonal.

> üéÆ **Curiosidade**: Evid√™ncias arqueol√≥gicas sugerem que vers√µes primitivas do jogo da velha j√° eram jogadas no Antigo Egito, por volta de 1300 a.C.

## Espa√ßo Amostral: Quantos Jogos Poss√≠veis Existem?

Para entender as probabilidades no jogo da velha, precisamos primeiro determinar o n√∫mero total de poss√≠veis configura√ß√µes do tabuleiro.

### Abordagem Inicial

√Ä primeira vista, poder√≠amos pensar que, com 9 c√©lulas e cada uma podendo estar em 3 estados (X, O ou vazio), ter√≠amos 3^9 = 19.683 possibilidades. No entanto, esta contagem √© imprecisa, pois:

1. Os jogadores se alternam, ent√£o o n√∫mero de X's e O's deve ser igual ou diferir em apenas 1
2. O jogo termina quando um jogador vence ou o tabuleiro est√° cheio
3. Certas configura√ß√µes s√£o imposs√≠veis de alcan√ßar em um jogo real

### C√°lculo Refinado

Considerando as restri√ß√µes acima, o n√∫mero real de poss√≠veis estados de jogo v√°lidos √© significativamente menor:

- **N√∫mero total de jogos poss√≠veis (incluindo jogos incompletos)**: 255.168
- **N√∫mero de jogos completos poss√≠veis**: 26.830

Quando consideramos a simetria do tabuleiro (rota√ß√µes e reflex√µes), este n√∫mero se reduz ainda mais:

- **N√∫mero de jogos distintos considerando simetria**: 31.896

## Probabilidades de Resultados

### Distribui√ß√£o de Resultados

Em um jogo aleat√≥rio (onde ambos os jogadores fazem movimentos aleat√≥rios), as probabilidades de cada resultado s√£o:

- **Vit√≥ria do primeiro jogador (X)**: 58,27%
- **Vit√≥ria do segundo jogador (O)**: 28,65%
- **Empate**: 13,08%

Estes n√∫meros revelam uma vantagem significativa para o primeiro jogador, o que √© esperado em jogos de informa√ß√£o perfeita com n√∫mero √≠mpar de casas.

### Probabilidade Condicional

A probabilidade de vit√≥ria muda drasticamente dependendo do primeiro movimento:

$$P(X_{vence} \mid X_{centro}) = 0,659$$

$$P(X_{vence} \mid X_{canto}) = 0,612$$

$$P(X_{vence} \mid X_{lateral}) = 0,521$$

Isto demonstra que iniciar no centro oferece a maior vantagem estat√≠stica.

## An√°lise Combinat√≥ria

### N√∫mero de Configura√ß√µes Vencedoras

Existem 8 linhas vencedoras poss√≠veis (3 horizontais, 3 verticais e 2 diagonais). Para cada linha, existem 2 possibilidades (X ou O), resultando em 16 configura√ß√µes vencedoras poss√≠veis.

No entanto, nem todas s√£o alcan√ß√°veis em um jogo real. O n√∫mero de configura√ß√µes vencedoras realmente poss√≠veis √©:

- **Configura√ß√µes com vit√≥ria de X**: 626
- **Configura√ß√µes com vit√≥ria de O**: 316

### C√°lculo Manual de Possibilidades

Vamos calcular formalmente o n√∫mero de poss√≠veis jogos at√© o terceiro movimento:

#### An√°lise sem considerar simetria

1. **Primeiro movimento (X)**: 
   $$N_1 = \binom{9}{1} = 9$$
   
   Onde $\binom{9}{1}$ representa o n√∫mero de maneiras de escolher 1 posi√ß√£o dentre 9 dispon√≠veis.

2. **Segundo movimento (O)**:
   $$N_2 = N_1 \times \binom{8}{1} = 9 \times 8 = 72$$
   
   Para cada uma das 9 configura√ß√µes anteriores, temos 8 posi√ß√µes restantes para O.

3. **Terceiro movimento (X)**:
   $$N_3 = N_2 \times \binom{7}{1} = 72 \times 7 = 504$$
   
   Para cada uma das 72 configura√ß√µes anteriores, temos 7 posi√ß√µes restantes para X.

#### An√°lise considerando simetria

O tabuleiro 3√ó3 possui 8 simetrias (4 rota√ß√µes e 4 reflex√µes). Definindo $G$ como o grupo de simetrias e $X$ como o conjunto de configura√ß√µes, pelo Lema de Burnside, o n√∫mero de √≥rbitas distintas √©:

$$|X/G| = \frac{1}{|G|} \sum_{g \in G} |X^g|$$

Onde $|X^g|$ √© o n√∫mero de configura√ß√µes fixadas pela simetria $g$.

Aplicando ao primeiro movimento:

1. **Primeiro movimento (X)**:
   - Devido √† simetria, as 9 posi√ß√µes se reduzem a 3 classes de equival√™ncia:
     * $C_1 = \{(1,1)\}$ (centro): 1 posi√ß√£o
     * $C_2 = \{(0,0), (0,2), (2,0), (2,2)\}$ (cantos): 4 posi√ß√µes equivalentes
     * $C_3 = \{(0,1), (1,0), (1,2), (2,1)\}$ (laterais): 4 posi√ß√µes equivalentes
   - Total: $|X/G| = 3$ possibilidades distintas

2. **Segundo movimento (O) ap√≥s X no centro**:
   - Com X no centro, as simetrias preservam 2 classes de equival√™ncia para O:
     * $D_1 = \{(0,0), (0,2), (2,0), (2,2)\}$ (cantos): 4 posi√ß√µes equivalentes
     * $D_2 = \{(0,1), (1,0), (1,2), (2,1)\}$ (laterais): 4 posi√ß√µes equivalentes
   - Total: $|X/G| = 2$ possibilidades distintas

3. **Segundo movimento (O) ap√≥s X no canto**:
   - Com X em um canto (por exemplo, (0,0)), as simetrias preservam 4 classes:
     * $E_1 = \{(1,1)\}$ (centro): 1 posi√ß√£o
     * $E_2 = \{(0,2), (2,0)\}$ (cantos adjacentes): 2 posi√ß√µes equivalentes
     * $E_3 = \{(2,2)\}$ (canto oposto): 1 posi√ß√£o
     * $E_4 = \{(0,1), (1,0)\}$ (laterais adjacentes): 2 posi√ß√µes equivalentes
     * $E_5 = \{(1,2), (2,1)\}$ (laterais opostas): 2 posi√ß√µes equivalentes
   - Total: $|X/G| = 4$ possibilidades distintas

4. **Segundo movimento (O) ap√≥s X na lateral**:
   - Com X em uma lateral (por exemplo, (0,1)), as simetrias preservam 4 classes:
     * $F_1 = \{(1,1)\}$ (centro): 1 posi√ß√£o
     * $F_2 = \{(0,0), (0,2)\}$ (cantos adjacentes): 2 posi√ß√µes equivalentes
     * $F_3 = \{(2,0), (2,2)\}$ (cantos opostos): 2 posi√ß√µes equivalentes
     * $F_4 = \{(1,0), (1,2)\}$ (laterais adjacentes): 2 posi√ß√µes equivalentes
     * $F_5 = \{(2,1)\}$ (lateral oposta): 1 posi√ß√£o
   - Total: $|X/G| = 4$ possibilidades distintas

Assim, pelo princ√≠pio da adi√ß√£o, o n√∫mero total de configura√ß√µes distintas ap√≥s dois movimentos √©:

$$N_{2,simetria} = 2 + 4 + 4 = 10$$

Em vez das 72 configura√ß√µes sem considerar simetria.

### C√°lculo de Probabilidade com Combinat√≥ria

A probabilidade de uma configura√ß√£o espec√≠fica $c$ ap√≥s $n$ movimentos pode ser calculada usando:

$$P(c) = \frac{1}{|C_n|}$$

Onde $|C_n|$ √© a cardinalidade do conjunto de todas as configura√ß√µes poss√≠veis ap√≥s $n$ movimentos.

Para calcular o n√∫mero de jogos $N(k)$ que terminam em exatamente $k$ movimentos (onde $k \geq 5$), usamos:

$$N(k) = \binom{9}{k} \times P_{vit\acute{o}ria}(k)$$

Onde $P_{vit\acute{o}ria}(k)$ √© a probabilidade de uma configura√ß√£o de vit√≥ria ocorrer no $k$-√©simo movimento, e $\binom{9}{k}$ representa o coeficiente binomial "9 escolhe $k$".

A probabilidade de vit√≥ria do jogador X em um jogo aleat√≥rio pode ser expressa como:

$$P(X_{vence}) = \sum_{k=5}^{9} P(X_{vence} \mid k) \times P(k)$$

Onde $P(X_{vence} \mid k)$ √© a probabilidade condicional de X vencer dado que o jogo termina em exatamente $k$ movimentos, e $P(k)$ √© a probabilidade de um jogo terminar em exatamente $k$ movimentos.

### √Årvore de Possibilidades

A √°rvore completa de possibilidades do jogo da velha tem:

- **Profundidade m√°xima**: 9 n√≠veis (correspondendo aos 9 movimentos poss√≠veis)
- **Fator de ramifica√ß√£o inicial**: 9 (n√∫mero de primeiras jogadas poss√≠veis)
- **Fator de ramifica√ß√£o m√©dio**: aproximadamente 4,47

## Estrat√©gia Perfeita e Teoria dos Jogos

O jogo da velha √© considerado "resolvido" na teoria dos jogos, o que significa que conhecemos a estrat√©gia √≥tima para ambos os jogadores.

### Teorema Minimax

Aplicando o algoritmo minimax, podemos provar que:

- Com jogo perfeito de ambos os lados, o resultado ser√° sempre um empate
- O primeiro jogador pode for√ßar no m√≠nimo um empate
- O segundo jogador pode no m√°ximo for√ßar um empate

### √Årvore de Decis√£o Simplificada

Uma vers√£o simplificada da √°rvore de decis√£o para o primeiro movimento mostra:

```
Centro ‚Üí Oponente no canto ‚Üí Canto oposto
Canto ‚Üí Oponente no centro ‚Üí Canto adjacente
Canto ‚Üí Oponente no canto adjacente ‚Üí Centro
```

## Implementa√ß√£o em Julia

Podemos simular jogos aleat√≥rios para verificar empiricamente as probabilidades te√≥ricas usando Julia, uma linguagem moderna e de alto desempenho para computa√ß√£o cient√≠fica:

```julia
using Random
using StatsBase

function criar_tabuleiro()
    return zeros(Int, 3, 3)
end

function verificar_vitoria(tabuleiro, jogador)
    # Verificar linhas e colunas
    for i in 1:3
        if all(tabuleiro[i, :] .== jogador) || all(tabuleiro[:, i] .== jogador)
            return true
        end
    end
    
    # Verificar diagonais
    if all(diag(tabuleiro) .== jogador) || all(diag(reverse(tabuleiro, dims=2)) .== jogador)
        return true
    end
    
    return false
end

function tabuleiro_cheio(tabuleiro)
    return !any(tabuleiro .== 0)
end

function simular_jogo()
    tabuleiro = criar_tabuleiro()
    jogador_atual = 1  # 1 para X, 2 para O
    
    while true
        # Encontrar posi√ß√µes vazias
        posicoes_vazias = findall(tabuleiro .== 0)
        
        if isempty(posicoes_vazias)
            return 0  # Empate
        end
        
        # Escolher movimento aleat√≥rio
        movimento = rand(posicoes_vazias)
        tabuleiro[movimento] = jogador_atual
        
        # Verificar vit√≥ria
        if verificar_vitoria(tabuleiro, jogador_atual)
            return jogador_atual
        end
        
        # Alternar jogador
        jogador_atual = 3 - jogador_atual  # Alterna entre 1 e 2
    end
end

# Simular 10.000 jogos
resultados = [simular_jogo() for _ in 1:10000]
contagem = countmap(resultados)

println("X vence: $(round(contagem[1]/100, digits=2))%")
println("O vence: $(round(contagem[2]/100, digits=2))%")
println("Empate: $(round(get(contagem, 0, 0)/100, digits=2))%")

# Visualiza√ß√£o dos resultados
using Plots

labels = ["X vence", "O vence", "Empate"]
valores = [get(contagem, 1, 0), get(contagem, 2, 0), get(contagem, 0, 0)]
porcentagens = round.(valores ./ sum(valores) .* 100, digits=1)

pie(labels, valores, 
    title = "Distribui√ß√£o de Resultados em 10.000 Jogos",
    legend = :topright,
    annotations = [(0.5, 0.5, text("Total: 10.000", :center, 10))],
    autopct = (x) -> "$(round(x, digits=1))%")
```

A implementa√ß√£o em Julia oferece v√°rias vantagens:

1. **Desempenho**: Julia combina a facilidade de uso de Python com o desempenho pr√≥ximo ao C
2. **Sintaxe matem√°tica**: Nota√ß√£o mais pr√≥xima da matem√°tica formal
3. **Visualiza√ß√£o integrada**: Biblioteca Plots para visualiza√ß√£o dos resultados
4. **Paraleliza√ß√£o autom√°tica**: Opera√ß√µes vetorizadas s√£o automaticamente paralelizadas

## Curiosidades Matem√°ticas

### Rela√ß√£o com a Teoria dos Grafos

O jogo da velha pode ser representado como um grafo onde:
- Cada n√≥ representa um estado do tabuleiro
- Cada aresta representa um movimento v√°lido
- O grafo completo cont√©m 5.478 n√≥s

### Complexidade Computacional

Apesar de sua simplicidade, o jogo da velha tem uma complexidade de:
- **Complexidade espacial**: O(b^d) ‚âà O(9!)
- **Complexidade temporal para solu√ß√£o exata**: O(b^d) ‚âà O(9!)

onde b √© o fator de ramifica√ß√£o m√©dio e d √© a profundidade m√°xima.

## Aplica√ß√µes Educacionais

O jogo da velha oferece excelentes oportunidades para ensinar conceitos matem√°ticos:

- **Probabilidade condicional**: Como as chances mudam ap√≥s cada jogada
- **Combinat√≥ria**: Contagem de poss√≠veis estados do jogo
- **Teoria dos jogos**: Estrat√©gias √≥timas e equil√≠brio
- **Simetria**: Como rota√ß√µes e reflex√µes reduzem o espa√ßo de estados

## Conclus√£o

Apesar de sua aparente simplicidade, o jogo da velha revela uma rica estrutura matem√°tica quando analisado sob a √≥tica da probabilidade e da combinat√≥ria. Sua completa resolu√ß√£o matem√°tica n√£o diminui seu valor educacional e recreativo, pelo contr√°rio, nos permite apreciar a eleg√¢ncia dos princ√≠pios matem√°ticos subjacentes a este jogo milenar.

> üß† **Reflex√£o**: A pr√≥xima vez que voc√™ jogar uma partida de jogo da velha, observe como cada movimento altera drasticamente o espa√ßo de probabilidades do jogo!

## Refer√™ncias

1. Ferguson, T. S. (2020). "Game Theory" (2nd ed.). Mathematics Department, UCLA.
2. Schaeffer, J., et al. (2007). "Checkers Is Solved". Science, 317(5844), 1518-1522.
3. Patashnik, O. (1980). "Qubic: 4√ó4√ó4 Tic-Tac-Toe". Mathematics Magazine, 53(4), 202-216.
4. Gardner, M. (2001). "The Colossal Book of Mathematics: Classic Puzzles, Paradoxes, and Problems". W. W. Norton & Company.
